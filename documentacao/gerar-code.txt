



[V√≠deo] Como configurar a Autentica√ß√£o OAuth na sua aplica√ß√£o e boas pr√°ticas
Passo 1: Como criar um aplicativo na App Store e gerar as Credenciais (client_id e client_secret)
Passo 2: Como utilizar as Credenciais para gerar o code
Passo 3: Como obter os tokens (access_token e refresh_token)post
Passo 4: Como utilizar o refresh_token para atualizar o access_tokenpost
Como criar um fluxo de verifica√ß√£o e renova√ß√£o do token
Como utilizar o access_token para autorizar suas requisi√ß√µes
Como revogar o acesso de um tokenpost
Erros relacionados √† Autentica√ß√£o
FAQ de Autentica√ß√£o




Passo 2: Como utilizar as Credenciais para gerar o code
###[Passo 2 de 4]
No passo anterior, voc√™ criou o aplicativo na App Store e obteve as credenciais. Neste passo, vamos utilizar as credenciais client_id e redirect_uri para obter o code.
O objetivo dessa etapa √© autorizar o aplicativo (criado no passo 1) a se conectar com a conta desejada do RD Station Marketing.
1. Compondo a URL de autoriza√ß√£o
Voc√™ deve substituir os par√¢metros client_id e redirect_uri da URL de autoriza√ß√£o indicada abaixo, pelas credenciais obtidas no passo anterior:
URL de autoriza√ß√£o
https://api.rd.services/auth/dialog?client_id=client_id&redirect_uri=redirect_uri&state=state
üí°
O par√¢metro redirect_uri deve ser substitu√≠do pela URL de Callback cadastrada no aplicativo criado no passo 1.
Se voc√™ estiver realizando esse passo manualmente, voc√™ pode substituir os par√¢metros utilizando o Gerador de URL de autoriza√ß√£o abaixo para criar sua URL:
Gerador de URL de autoriza√ß√£o
Campo
Valor
Descri√ß√£o
Client Id: client_id do aplicativo
Redirect Uri: redirect_uri do aplicativo (callback)
State: (Opcional) Param extra para a URL de callback
URL de autentica√ß√£o:
https://api.rd.services/auth/dialog?client_id=&redirect_uri=&state=
Aten√ß√£o: Certifique-se de que a sua url de callback foi inserida por completo (exatamente como foi cadastrada no aplicativo), pois aqui √© feita uma compara√ß√£o de strings entre a url de callback inserida na sua app e a redirect uri.
üìò
O par√¢metro "state" √© usado como um mecanismo de seguran√ßa para garantir a integridade da resposta de autentica√ß√£o ao usar o OAuth e prevenir ataques CSRF.
Ele √© determinado ao configurar a URL de autoriza√ß√£o e, ao gerar o code, o servidor retorna esse par√¢metro na resposta, permitindo comparar esse valor recebido com o valor originalmente gerado.
Exemplo de URL de autoriza√ß√£o
Veja um exemplo de como ficaria a URL de autoriza√ß√£o ap√≥s substituir o client_id e redirect_uri pelas credenciais geradas por um aplicativo.
Credenciais de exemplo:
Campo
Valor
client_id68956445-3421-4a0f-a0dd-3142a97621f4
client_secret81f840006c994d71a87d0b4fa6e2f0a2
url_callbackhttps://www.rdstation.com/contato
URL de autoriza√ß√£o atualizada com as credenciais:
URL de autoriza√ß√£o atualizada
https://api.rd.services/auth/dialog?client_id=68956445-3421-4a0f-a0dd-3142a97621f4&redirect_uri=https://www.rdstation.com/contato
2. Autorizando o aplicativo
Ap√≥s gerar a URL de autoriza√ß√£o, √© necess√°rio acess√°-la para obter o code.
Ao acessar/ser redirecionado para a URL de autoriza√ß√£o, o usu√°rio poder√° selecionar qual conta do RD Station Marketing deseja integrar e ser√° exibida a caixa de permiss√µes para confirmar a autoriza√ß√£o, conforme mostrado a imagem abaixo:
Se o redirecionamento for feito corretamente, o code ser√° retornado em uma URL com a estrutura similar:
URL com o code
https://yourapp.org/auth/callback?code={code}
‚ùóÔ∏è
As atualiza√ß√µes no Aplicativo levam at√© 1 hora para serem refletidas.
Se a URL de Callback for atualizada e estiver ocorrendo um erro ao tentar gerar o code, √© necess√°rio aguardar esse tempo para utiliz√°-la.
Se voc√™ estiver criando um aplicativo privado (para uso interno):
Pode realizar essa etapa acessando a URL de autoriza√ß√£o pela barra de endere√ßo do seu navegador para ser redirecionado para a sua conta do RD Station Marketing, autorizar a conex√£o e obter o code.
Se voc√™ estiver criando um aplicativo p√∫blico (para os seus clientes):
Sua aplica√ß√£o precisa redirecionar o navegador do usu√°rio para a URL de autoriza√ß√£o que voc√™ construiu. Para isso, pode exibir um bot√£o que diz: "Conectar Nome do app" com a URL de autoriza√ß√£o para que o usu√°rio seja ser redirecionado para a conta do RD Station Marketing e obtenha o code.
üöß
Esse processo s√≥ precisa ser feito uma vez
O code expira em seu primeiro uso ou ap√≥s 60 minutos, pois a sua √∫nica fun√ß√£o no processo de Autentica√ß√£o √© solicitar o access_token e refresh_token.
Ap√≥s utiliz√°-lo para gerar os tokens ele n√£o ser√° mais necess√°rio para a utiliza√ß√£o da API.
Ainda ficou com d√∫vida? Leia a nossa receita (:
Gerando sua URL de autentica√ß√£o
Open Recipe
Updated 20 days ago
Pr√≥ximo passo:
Agora que voc√™ tem ocode, voc√™ pode seguir para o pr√≥ximo passo para utiliz√°-lo para obter oaccess_tokene orefresh_token:
Passo 3: Como obter os tokens (access_token e refresh_token)

Table of Contents
1. Compondo a URL de autoriza√ß√£o
Gerador de URL de autoriza√ß√£o
Exemplo de URL de autoriza√ß√£o
2. Autorizando o aplicativo
Se voc√™ estiver criando um aplicativo privado (para uso interno):
Se voc√™ estiver criando um aplicativo p√∫blico (para os seus clientes):

